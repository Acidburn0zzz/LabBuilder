<?xml version="1.0" encoding="utf-8"?>

<labbuilderconfig name="TestConfigFull"
                  version="1.0">
  <description>Simple Test Lab Configuration Full</description>

  <settings domainname="LABBUILDER.COM"
            email="daniel@LABBUILDER.COM"
            vmpath="c:\vm\LABBUILDER.COM"
            vhdparentpath="c:\vm\LABBUILDER.COM\Virtual Hard Disk Templates"
            configpath=".\..\DSCLibrary\" />

  <resources>
    <module name="xNetworking" url="https://github.com/PlagueHO/xNetworking/archive/Rearchitect-xIPAddress-xDefaultGatewayAddress.zip" folder="xNetworking-Rearchitect-xIPAddress-xDefaultGatewayAddress" />
    <module name="xADCSDeployment" url="https://github.com/PlagueHO/xAdcsDeployment/archive/dev.zip" folder="xAdcsDeployment-dev" />
    <module name="cMicrosoftUpdate" url="https://github.com/fabiendibot/cMicrosoftUpdate/archive/master.zip" folder="cMicrosoftUpdate-master" />
    <module name="cFSRM" url="https://github.com/PlagueHO/cFSRM/archive/dev.zip" folder="cFSRM-dev" />
    
  </resources>
  
  <switches>
    <switch name="General Purpose External" type="External">
      <adapters>
        <adapter name="Cluster" macaddress="00155D010701" />
        <adapter name="Management" macaddress="00155D010702" />
        <adapter name="SMB" macaddress="00155D010703" />
        <adapter name="LM" macaddress="00155D010704" />
      </adapters>
    </switch>
    <switch name="General Purpose Internal" type="Internal" /> 
    <switch name="Domain Private Site A" type="Private" vlan="2" />
    <switch name="Domain Private Site B" type="Private" vlan="3" />
    <switch name="Domain Private Site C" type="Private" vlan="4" />
    <switch name="Internet" type="Private" vlan="9" />
  </switches>

  <templates fromvm="template *">
    <template name="Template Windows Server 2012 R2 Datacenter Full"
              memorystartupbytes="1GB"
              processorcount="1"
              administratorpassword="P@ssword!1"
              productkey="W3GGN-FT8W3-Y4M27-J84CP-Q3VJ9"
              timezone="New Zealand Standard Time" 
              ostype="Server" />
    <template name="Template Windows Server 2012 R2 Datacenter Core"
              memorystartupbytes="1GB"
              processorcount="1"
              administratorpassword="P@ssword!1"
              productkey="W3GGN-FT8W3-Y4M27-J84CP-Q3VJ9"
              timezone="New Zealand Standard Time" 
              ostype="Server" />
    <template name="Template Windows 10 Enterprise"
              memorystartupbytes="2GB"
              processorcount="1"
              administratorpassword="P@ssword!1"
              productkey="KK86J-6TNXJ-MHJ2M-GYMJG-BP2JR"
              timezone="New Zealand Standard Time" 
              ostype="Client" />
  </templates>

  <vms>
    <vm name="LABBUILDER.COM SS_ROOTCA"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SS_ROOTCA"
        usedifferencingbootdisk="Y">
      <dsc configname="STANDALONE_ROOTCA"
           configfile="STANDALONE_ROOTCA.DSC.ps1"
           logging="Y">
          <parameters>
            CACommonName = "LABBUILDER.COM Root CA"
            CADistinguishedNameSuffix = "DC=LABBUILDER,DC=COM"
            CRLPublicationURLs = "1:C:\Windows\system32\CertSrv\CertEnroll\%3%8%9.crl\n10:ldap:///CN=%7%8,CN=%2,CN=CDP,CN=Public Key Services,CN=Services,%6%10\n2:http://pki.labbuilder.com/CertEnroll/%3%8%9.crl"
            CACertPublicationURLs = "1:C:\Windows\system32\CertSrv\CertEnroll\%1_%3%4.crt\n2:ldap:///CN=%7,CN=AIA,CN=Public Key Services,CN=Services,%6%11\n2:http://pki.labbuilder.com/CertEnroll/%1_%3%4.crt"
            SubCAs = @('SA_SUBCA')
          </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SS_DHCPDNS"
        template="Template Windows Server 2012 R2 Datacenter Full"
        computername="SS_DHCPDNS"
        usedifferencingbootdisk="Y">
      <dsc configname="STANDALONE_DHCPDNS"
           configfile="STANDALONE_DHCPDNS.DSC.ps1"
           logging="Y">
        <parameters>
          Scopes = @(
            @{ Name = 'Internet';
               Start = '131.0.0.50';
               End = '131.0.0.250';
               SubnetMask = '255.0.0.0';
               AddressFamily = 'IPv4'
            }
          )
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Internet"
                 switchname="Internet">
          <ipv4 address="131.0.0.10"
                defaultgateway=""
                subnetmask="0"
                dnsserver="131.0.0.10"/>
          <ipv6 address="2001:54b9:f782:ae41::10"
                defaultgateway=""
                subnetmask="0"
                dnsserver="2001:54b9:f782:ae41::10"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_DC1"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_DC1"
        usedifferencingbootdisk="Y">
      <dsc configname="DC_FORESTPRIMARY"
           configfile="DC_FORESTPRIMARY.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.10"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10"/>
          <ipv6 address="fd53:ccc5:895a:bc00::a"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_DC2"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_DC2"
        usedifferencingbootdisk="Y">
      <dsc configname="DC_SECONDARY"
           configfile="DC_SECONDARY.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.11"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::b"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_DHCP1"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_DHCP1"
        usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_DHCP"
           configfile="MEMBER_DHCP.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
          Scopes = @(
              @{ Name = 'Site A Primary';
                 Start = '192.168.128.50';
                 End = '192.168.128.254';
                 SubnetMask = '255.255.255.0';
                 AddressFamily = 'IPv4'
              }
            )
          Reservations = @(
              @{ Name = 'SA_DC1';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000000';
                 IPAddress = '192.168.128.10';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_DC2';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000001';
                 IPAddress = '192.168.128.11';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_DHCP1';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000002';
                 IPAddress = '192.168.128.16';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_DHCP2';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000003';
                 IPAddress = '192.168.128.17';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_NPS';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000004';
                 IPAddress = '192.168.128.18';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_EDGE1';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000005';
                 IPAddress = '192.168.128.19';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_EDGE2';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000006';
                 IPAddress = '192.168.128.20';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_WDS';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000007';
                 IPAddress = '192.168.128.21';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_WSUS';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000008';
                 IPAddress = '192.168.128.22';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_SUBCA';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '000000000009';
                 IPAddress = '192.168.128.23';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_FS1';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '00000000000A';
                 IPAddress = '192.168.128.24';
                 AddressFamily = 'IPv4'
              },
              @{ Name = 'SA_FS2';
                 ScopeID = '192.168.128.0';
                 ClientMACAddress = '00000000000B';
                 IPAddress = '192.168.128.25';
                 AddressFamily = 'IPv4'
              }
            )
          ScopeOptions = @(
              @{ Name = 'SA_DC1';
                 ScopeID = '192.168.128.0';
                 DNServerIPAddress = @('192.168.128.10','192.168.128.11');
                 Router = '192.168.128.19';
                 AddressFamily = 'IPv4'
              }
            )
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.16"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::10"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_DHCP2"
      template="Template Windows Server 2012 R2 Datacenter CORE"
      computername="SA_DHCP2"
      usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_DHCP"
           configfile="MEMBER_DHCP.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.17"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::11"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_NPS"
      template="Template Windows Server 2012 R2 Datacenter Full"
      computername="SA_NPS"
      usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_NPS"
           configfile="MEMBER_NPS.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.18"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::12"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_EDGE1"
      template="Template Windows Server 2012 R2 Datacenter CORE"
      computername="SA_EDGE1"
      usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_REMOTEACCESS"
           configfile="MEMBER_REMOTEACCESS.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.19"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::13"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_EDGE2"
      template="Template Windows Server 2012 R2 Datacenter CORE"
      computername="SA_EDGE2"
      usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_REMOTEACCESS"
           configfile="MEMBER_REMOTEACCESS.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.20"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::14"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_WDS"
      template="Template Windows Server 2012 R2 Datacenter Full"
      computername="SA_WDS"
      usedifferencingbootdisk="Y"
      datavhdsize="10GB" >
      <dsc configname="MEMBER_WDS"
           configfile="MEMBER_WDS.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.21"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::15"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_WSUS"
      template="Template Windows Server 2012 R2 Datacenter CORE"
      computername="SA_WSUS"
      usedifferencingbootdisk="Y" 
      datavhdsize="10GB" >
      <dsc configname="MEMBER_WSUS"
           configfile="MEMBER_WSUS.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.22"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::16"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_SUBCA"
      template="Template Windows Server 2012 R2 Datacenter CORE"
      computername="SA_SUBCA"
      usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_SUBCA"
           configfile="MEMBER_SUBCA.DSC.ps1"
           logging="Y">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
          CACommonName = "LABBUILDER.COM Issuing CA"
          CADistinguishedNameSuffix = "DC=LABBUILDER,DC=COM"
          CRLPublicationURLs = "65:C:\Windows\system32\CertSrv\CertEnroll\%3%8%9.crl\n79:ldap:///CN=%7%8,CN=%2,CN=CDP,CN=Public Key Services,CN=Services,%6%10\n6:http://pki.labbuilder.com/CertEnroll/%3%8%9.crl"
          CACertPublicationURLs = "1:C:\Windows\system32\CertSrv\CertEnroll\%1_%3%4.crt\n2:ldap:///CN=%7,CN=AIA,CN=Public Key Services,CN=Services,%6%11\n2:http://pki.labbuilder.com/CertEnroll/%1_%3%4.crt"
          RootCAName = "SS_ROOTCA"
          RootCACommonName = "LABBUILDER.COM Root CA"
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.23"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::17"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_FS1"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_FS1"
        usedifferencingbootdisk="Y"
        datavhdsize="10GB" >
      <dsc configname="MEMBER_FILESERVER"
           configfile="MEMBER_FILESERVER.DSC.ps1"
           logging="Y">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.24"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::18"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM SA_FS2"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_FS2"
        usedifferencingbootdisk="Y" 
        datavhdsize="10GB" >
      <dsc configname="MEMBER_FILESERVER"
           configfile="MEMBER_FILESERVER.DSC.ps1">
        <parameters>
          DomainName = "LABBUILDER.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.25"
                defaultgateway="192.168.128.19"
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::19"
                defaultgateway="fd53:ccc5:895a:bc00::13"
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="LABBUILDER.COM DA_IT01"
      template="Template Windows 10 Enterprise"
      computername="DA_IT01"
      usedifferencingbootdisk="Y">
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A" />
      </adapters>
      <install>
        <msu url="http://download.microsoft.com/download/1/D/8/1D8B5022-5477-4B9A-8104-6A71FF9D98AB/WindowsTH-KB2693643-x64.msu" />
      </install>
    </vm>

  </vms>

</labbuilderconfig>
<?xml version="1.0" encoding="utf-8"?>

<labbuilderconfig name="TestConfig1"
                  version="1.0">
  <description>Simple Test Lab Configuration File 1</description>

  <settings domainname="BMDLAB.COM"
            email="daniel@bmdlab.com"
            vmpath="c:\vm\BMDLAB.COM"
            vhdparentpath="c:\vm\BMDLAB.COM\Virtual Hard Disk Templates"
            configpath=".\..\DSCLibrary\" />

  <switches>
    <switch name="General Purpose External" type="External">
      <adapters>
        <adapter name="Cluster" macaddress="00155D010701" />
        <adapter name="Management" macaddress="00155D010702" />
        <adapter name="SMB" macaddress="00155D010703" />
        <adapter name="LM" macaddress="00155D010704" />
      </adapters>
    </switch>
    <switch name="General Purpose Internal" type="Internal" /> 
    <switch name="Domain Private Site A" type="Private" vlan="2" />
    <switch name="Domain Private Site B" type="Private" vlan="3" />
    <switch name="Domain Private Site C" type="Private" vlan="4" />
  </switches>

  <templates fromvm="template *">
    <template name="Template Windows Server 2012 R2 Datacenter Full"
              memorystartupbytes="1GB"
              processorcount="1"
              administratorpassword="P@ssword!1"
              productkey="W3GGN-FT8W3-Y4M27-J84CP-Q3VJ9"
              timezone="New Zealand Standard Time" />
    <template name="Template Windows Server 2012 R2 Datacenter Core"
              memorystartupbytes="1GB"
              processorcount="1"
              administratorpassword="P@ssword!1"
              productkey="W3GGN-FT8W3-Y4M27-J84CP-Q3VJ9"
              timezone="New Zealand Standard Time" />
    <template name="Template Windows 10 Enterprise"
              memorystartupbytes="2GB"
              processorcount="1"
              administratorpassword="P@ssword!1"
              productkey="KK86J-6TNXJ-MHJ2M-GYMJG-BP2JR"
              timezone="New Zealand Standard Time" />
  </templates>

  <vms>
    <vm name="BMDLAB.COM SS_ROOTCA"
        template="Template Windows Server 2012 R2 Datacenter Full"
        computername="SS_ROOTCA"
        usedifferencingbootdisk="Y">
      <dsc configname="STANDALONE_ROOTCA"
           configfile="STANDALONE_ROOTCA.DSC.ps1">
          <parameters>
            CACommonName = "BMDLAB.COM Root CA"
            CADistinguishedNameSuffix = "DC=BMDLAB,DC=COM"
            DSConfigDN = "CN=Configuration,DC=BMDLAB,DC=COM"
            CRLPublicationURLs = "1:C:\Windows\system32\CertSrv\CertEnroll\%1_%3%4.crt\n2:ldap:///CN=%7,CN=AIA,CN=Public Key Services,CN=Services,%6%11\n2:http://pki.bmdlab.local/CertEnroll/%1_%3%4.crt"
            CACertPublicationURLs = "1:C:\Windows\system32\CertSrv\CertEnroll\%1_%3%4.crt\n2:ldap:///CN=%7,CN=AIA,CN=Public Key Services,CN=Services,%6%11\n2:http://pki.bmdlab.local/CertEnroll/%1_%3%4.crt"
          </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
      </adapters>
    </vm>
    
    <vm name="BMDLAB.COM SA_DC1"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_DC1"
        usedifferencingbootdisk="Y">
      <dsc configname="DC_FORESTPRIMARY"
           configfile="DC_FORESTPRIMARY.DSC.ps1">
        <parameters>
          DomainName = "BMDLAB.COM"
          DomainAdminPassword = "P@ssword!1"
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.10"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.128.10"/>
          <ipv6 address="fd53:ccc5:895a:bc00::a"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="BMDLAB.COM SA_DC2"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_DC2"
        usedifferencingbootdisk="Y">
      <dsc configname="DC_SECONDARY"
           configfile="DC_SECONDARY.DSC.ps1">
        <parameters>
          DomainName = "BMDLAB.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.11"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::b"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="BMDLAB.COM SA_DHCP1"
        template="Template Windows Server 2012 R2 Datacenter CORE"
        computername="SA_DHCP1"
        usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_DHCP"
           configfile="MEMBER_DHCP.DSC.ps1">
        <parameters>
          DomainName = "BMDLAB.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.16"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::10"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

    <vm name="BMDLAB.COM SA_DHCP2"
    template="Template Windows Server 2012 R2 Datacenter CORE"
    computername="SA_DHCP2"
    usedifferencingbootdisk="Y">
      <dsc configname="MEMBER_DHCP"
           configfile="MEMBER_DHCP.DSC.ps1">
        <parameters>
          DomainName = "BMDLAB.COM"
          DomainAdminPassword = "P@ssword!1"
          PSDscAllowDomainUser = $True
        </parameters>
      </dsc>
      <adapters>
        <adapter name="General Purpose External"
                 switchname="General Purpose External" />
        <adapter name="Domain Private Site A"
                 switchname="Domain Private Site A">
          <ipv4 address="192.168.128.17"
                defaultgateway=""
                subnetmask="24"
                dnsserver="192.168.128.10,192.168.128.11"/>
          <ipv6 address="fd53:ccc5:895a:bc00::11"
                defaultgateway=""
                subnetmask="64"
                dnsserver="fd53:ccc5:895a:bc00::a,fd53:ccc5:895a:bc00::b"/>
        </adapter>
      </adapters>
    </vm>

  </vms>

</labbuilderconfig>